# Book Management System API

This is an API developed in Ruby on Rail which will help you manage book loans and returns from users.

## Ruby Version

Using ruby 2.7.0

Using Rails 5.1.7

## Installation

After downloading the source code and accessing from the command line to the root folder run.

```bash
bundle install
```

## Usage

create postgres database called as you named it on the database.yml. then run..
```bash
rails db:migrate
rails db:seed:books
rails server
```

## API Docs

### Users

**Register new user.**
It creates a new user with a full_name, an initial amount, and an autogenerated account number

```API
POST /v1/users
{
  full_name: string, //required
  amount: numeric // required
}

```

**Update user amount.**
It updates the user account balance with a new amount

```API
PUT /v1/users
{
  amount: numeric // required
}

```

It queries **user's information** and borrowed books by its :id

```API
GET /v1/users/:id
```

### Books

**Register a new book.**
It adds a new book on the database with a title, an author, and an initial stock of available books

```API
POST /v1/books
{
  title: string, //required
  author: string, //required
  stock: numeric, // required
}

```

It queries **book's information** such as available books, loans, and users that have borrow them by its book id

```API
GET /v1/books/:id
```


It gets a **book's income** in a range of date by its :id

```API
POST /v1/books/income/:id
{
  start_date: datetime | date // optional ex: "2021-04-13"
  end_date: datetime | date // optional ex: "2021-04-15"
}

```

### Book Transactions

**Borrow a book.**
It creates a new book transaction on the database with a user id, a book id, and a start date of borrow

```API
POST /v1/book_transactions
{
  user_id: numeric, //required
  book_id: numeric, //required
}
```

**Return a book.**
It updates the book transaction  that was using that user and that book and applies the calculations to books incomes and the new user balance

```API
PUT /v1/book_transactions/:user_id
{
  user_id: numeric, //required
  book_id: numeric, //required
}
```

## License
[MIT](https://choosealicense.com/licenses/mit/)